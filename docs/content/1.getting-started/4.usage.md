---
title: Usage
description: Learn how to use Nuxt Email Renderer module in your Nuxt project.
navigation:
  icon: i-lucide-play
seo:
  description: Learn how to use Nuxt Email Renderer module in your Nuxt project.
---

## Test Your Setup

Start your Nuxt development server:

::code-group

```bash [npm]
npm run dev
```

```bash [yarn]
yarn dev
```

```bash [pnpm]
pnpm dev
```

```bash [bun]
bun run dev
```

::

::note
If you have the Nuxt DevTools enabled, you can test rendering directly from the DevTools panel. You should see your `WelcomeEmail` template listed.
::

## Rendering Emails in Server-Side Code

You can use the `renderEmail` (or `renderEmailComponent`) function in your server-side code to render email templates. This is the recommended approach for rendering emails in production.

Here's an example of how to use it in a server route:

```ts [server/api/send-email.post.ts]
export default defineEventHandler(async (event) => {
  const body = await readBody(event);

  const html = await renderEmail(body.name, body.props, {
    pretty: true,
  });

  // You can now use the rendered HTML (e.g., send it via email)
  // Example: await sendEmail({ to: body.email, html })

  return { success: true };
});
```

::note
Both `renderEmail` and `renderEmailComponent` are identical functions - `renderEmail` is an alias provided for better naming consistency.
::

## Creating a Custom API Endpoint

If you need to render emails from client-side code, you should create your own API endpoint. This gives you full control over authentication, authorization, and which templates can be rendered.

Here's an example:

```ts [server/api/render-email.post.ts]
import { z } from "zod";

// Define which templates are allowed to be rendered from the client
const ALLOWED_TEMPLATES = ["WelcomeEmail", "PasswordResetEmail"];

const bodySchema = z.object({
  name: z.string().refine((name) => ALLOWED_TEMPLATES.includes(name), {
    message: "Invalid template name",
  }),
  props: z.record(z.any()).optional(),
});

export default defineEventHandler(async (event) => {
  // Add your own authentication/authorization logic here
  // const user = await requireUser(event)

  const { name, props } = await readValidatedBody(event, bodySchema.parse);

  const html = await renderEmail(name, props, {
    pretty: true,
  });

  return html;
});
```

Then you can call it from your client-side code:

```ts
const html = await $fetch("/api/render-email", {
  method: "POST",
  body: {
    name: "WelcomeEmail",
    props: {
      userName: "John Doe",
      confirmationUrl: "https://example.com/confirm?token=abc123",
    },
  },
});
```

## Type-Safe Email Rendering

For advanced use cases where you want full type safety and prop autocompletion, you can use the exported types from the module:

### Using ExtractComponentProps

The `ExtractComponentProps` type utility allows you to extract prop types from your email template components:

```ts [server/api/send-welcome-email.post.ts]
import type { ExtractComponentProps } from 'nuxt-email-renderer/runtime/server/utils'

// Define your email template's props type
// This will match the Props interface in your WelcomeEmail.vue component
type WelcomeEmailProps = {
  userName: string
  confirmationUrl: string
}

export default defineEventHandler(async (event) => {
  const body = await readBody(event);

  // Now you have type-safe props
  const html = await renderEmail<WelcomeEmailProps>(
    'WelcomeEmail',
    {
      userName: body.userName, // TypeScript will validate these props
      confirmationUrl: body.confirmationUrl,
    },
    {
      pretty: true,
    }
  );

  return html;
});
```

### Type Safety Best Practices

1. **Define Props Interface**: Always define a TypeScript interface for your email template props using `defineProps<Props>()` in your `.vue` files
2. **Use Type Parameters**: When calling `renderEmail`, provide the props type as a generic parameter for better type checking
3. **Validate Input**: Use libraries like Zod to validate user input before passing to `renderEmail`

Example email template with typed props:

```vue [emails/WelcomeEmail.vue]
<script setup lang="ts">
interface Props {
  userName: string
  confirmationUrl: string
  companyName?: string
}

const { 
  userName, 
  confirmationUrl, 
  companyName = 'Our Company' 
} = defineProps<Props>()
</script>

<template>
  <EHtml>
    <ESubject>Welcome to {{ companyName }}!</ESubject>
    <EHead />
    <EBody>
      <EText>Hi {{ userName }},</EText>
      <EButton :href="confirmationUrl">
        Confirm Your Email
      </EButton>
    </EBody>
  </EHtml>
</template>
```
  },
});
```
